<!DOCTYPE html>
<html>
<head>
    <title>E-commerce</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: darkblue;
            color: white;
        }
        .add-to-cart-button {
            background-color: green;
            color: white;
        }

        .remove-from-cart-button {
            background-color: red;
            color: white;
        }         

       
h2{
        text-align: center;
    }
#sum{
    text-align: center;
    font-size: 18px;
    font-weight: bold;
}
    </style>
</head>
<body>
    <h2>Discount List</h2>
    <table id="discount-table">
        <tr>
            <th>Vendor</th>
            <th>Trade A</th>
            <th>Trade B</th>
            <th>Trade C</th>
            <th>Trade D</th>
        </tr>
    </table>

    <h2>Product List</h2>
    <table id="product-table">
        <tr>
            <th>#</th>
            <th>Product Name</th>
            <th>Price</th>
            <th>Tags</th>
            <th>Vendor</th>
            <th>Cart</th>
        </tr>
    </table>

    <h2>Shopping Cart</h2>
    <table id="cart">
        <tr>
            <th>Product Name</th>
            <th>Price</th>
            <th>Discount Amount</th>
            <th>Discounted Price</th>
            <th>Action</th>
        </tr>
    </table>
    <p id="sum">Total: <span id="total">0.00</span></p>
    <script>

const discountTable = [
    {
        Vendor: 'Vendor 1',
        'Trade A': 12,
        'Trade B': 12,
        'Trade C': 'N/A',
        'Trade D': 6
    },
    {
        Vendor: 'Vendor 2',
        'Trade A': 10,
        'Trade B': 8,
        'Trade C': 20,
        'Trade D': 'N/A'
    },
    {
        Vendor: 'Vendor 3',
        'Trade A': 'N/A',
        'Trade B': 25,
        'Trade C': 3,
        'Trade D': 16
    },
    {
        Vendor: 'Vendor 4',
        'Trade A': 9,
        'Trade B': 'N/A',
        'Trade C': 16,
        'Trade D': 30
    },
    {
        Vendor: 'Vendor 5',
        'Trade A': 5,
        'Trade B': 11,
        'Trade C': 'N/A',
        'Trade D': 30
    }
];


        const productTable = [
            {
                "id": 1,
                "name": "Test Product 1",
                "price": 12.5,
                "tags": ["TRADE A", "ice"],
                "vendor": "Vendor 5",
                "discount": 3
            },
            {
                "id": 2,
                "name": "Test Product 2",
                "price": 42.5,
                "tags": ["TRADE B", "ice2"],
                "vendor": "Vendor 4",
                "discount": 0
            },
            {
                "id": 3,
                "name": "Test Product 3",
                "price": 200,
                "tags": ["TRADE C", "test"],
                "vendor": "Vendor 3",
                "discount": 3
            },
            {
                "id": 4,
                "name": "Test Product 4",
                "price": 52.5,
                "tags": ["TRADE C", "test"],
                "vendor": "Vendor 2",
                "discount": 0
            },
            {
                "id": 5,
                "name": "Test Product 5",
                "price": 712.5,
                "tags": ["TRADE D", "test"],
                "vendor": "Vendor 1",
                "discount": 0
            },
            {
                "id": 6,
                "name": "Test Product 6",
                "price": 17,
                "tags": ["TRADE A", "test"],
                "vendor": "Vendor 3",
                "discount": 12
            },
            {
                "id": 7,
                "name": "Test Product 7",
                "price": 55,
                "tags": ["TRADE A", "test"],
                "vendor": "Vendor 3",
                "discount": 12
            },
            {
                "id": 8,
                "name": "Test Product 8",
                "price": 37,
                "tags": ["TRADE D", "test"],
                "vendor": "Vendor 4",
                "discount": 12
            },
            {
                "id": 9,
                "name": "Test Product 9",
                "price": 82,
                "tags": ["TRADE C", "test"],
                "vendor": "Vendor 4",
                "discount": 34
            },
            {
                "id": 10,
                "name": "Test Product 10",
                "price": 52,
                "tags": ["TRADE B", "test"],
                "vendor": "Vendor 2",
                "discount": 25
            },
            {
                "id": 11,
                "name": "Test Product 11",
                "price": 102,
                "tags": ["TRADE B", "test"],
                "vendor": "Vendor 1",
                "discount": 25
            },
            {
                "id": 12,
                "name": "Test Product 12",
                "price": 172.5,
                "tags": ["TRADE B", "test"],
                "vendor": "Vendor 4",
                "discount": 0
            },
            {
                "id": 13,
                "name": "Test Product 13",
                "price": 100,
                "tags": ["TRADE D", "test"],
                "vendor": "Vendor 5",
                "discount": 12
            },
            {
                "id": 14,
                "name": "Test Product 14",
                "price": 99.5,
                "tags": ["TRADE D", "test"],
                "vendor": "Vendor 5",
                "discount": 12
            },
            {
                "id": 15,
                "name": "Test Product 15",
                "price": 87.5,
                "tags": ["TRADE A", "test"],
                "vendor": "Vendor 5",
                "discount": 0
            },
            {
                "id": 16,
                "name": "Test Product 16",
                "price": 57,
                "tags": ["TRADE A", "test"],
                "vendor": "Vendor 1",
                "discount": 13
            },
            {
                "id": 17,
                "name": "Test Product 17",
                "price": 10,
                "tags": ["TRADE C", "test"],
                "vendor": "Vendor 2",
                "discount": 0
            },
            {
                "id": 18,
                "name": "Test Product 18",
                "price": 412.5,
                "tags": ["TRADE D", "test"],
                "vendor": "Vendor 3",
                "discount": 56
            },
            {
                "id": 19,
                "name": "Test Product 19",
                "price": 112.5,
                "tags": ["TRADE B", "test"],
                "vendor": "Vendor 4",
                "discount": 11
            },
            {
                "id": 20,
                "name": "Test Product 20",
                "price": 102,
                "tags": ["TRADE B", "test"],
                "vendor": "Vendor 5",
                "discount": 15
            },
            {
                "id": 21,
                "name": "Test Product 21",
                "price": 52,
                "tags": ["TRADE A", "test"],
                "vendor": "Vendor 3",
                "discount": 2
            },
            {
                "id": 22,
                "name": "Test Product 22",
                "price": 32,
                "tags": ["TRADE C", "test"],
                "vendor": "Vendor 2",
                "discount": 0
            },
            {
                "id": 23,
                "name": "Test Product 23",
                "price": 12,
                "tags": ["TRADE B", "test"],
                "vendor": "Vendor 4",
                "discount": 0
            },
            {
                "id": 24,
                "name": "Test Product 24",
                "price": 584.5,
                "tags": ["TRADE D", "test"],
                "vendor": "Vendor 1",
                "discount": 0
            },
            {
                "id": 25,
                "name": "Test Product 25",
                "price": 67,
                "tags": ["TRADE D", "test"],
                "vendor": "Vendor 5",
                "discount": 3
            },
            {
                "id": 26,
                "name": "Test Product 26",
                "price": 132.5,
                "tags": ["TRADE A", "test"],
                "vendor": "Vendor 5",
                "discount": 0
            },
            {
                "id": 27,
                "name": "Test Product 27",
                "price": 42.5,
                "tags": ["TRADE B", "test"],
                "vendor": "Vendor 2",
                "discount": 0
            }
        ];


        const cart = [];

        function applyDiscount(product) {
            // Extract the trade from the tags
            const tags = product.tags;
            const trade = tags.find(tag => tag.startsWith('TRADE'));

            if (trade) {
                const matchingDiscount = discountTable.find(discount => {
                    return discount.Vendor === product.vendor && discount.Trade === trade;
                });

                if (matchingDiscount) {
                    if (matchingDiscount.Discount !== 'N/A') {
                        const discountAmount = (matchingDiscount.Discount / 100) * product.price;
                        return product.price - discountAmount;
                    }
                }
            }

            return product.price;
        }

        function addToCart(id) {
            const product = productTable.find(p => p.id === id);
            if (product) {
                const discountedPrice = applyDiscount(product);
                cart.push({ ...product, price: discountedPrice });
                updateCart();
            }
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }

       //update cart
       
       function updateCart() {
    const cartTable = document.getElementById('cart');
    const totalElement = document.getElementById('total');
    let total = 0;

    cartTable.innerHTML = `<tr>
        <th>Product Name</th>
        <th>Original Price</th>
        <th>Discount Percentage</th>
        <th>Discounted Price</th>
        <th>Vendor</th>
        <th>Remove from Cart</th>
    </tr>`;

    cart.forEach((item, index) => {
        const discountedPrice = applyDiscount(item);
        total += discountedPrice;

        cartTable.innerHTML += `
            <tr>
                <td>${item.name}</td>
                <td>${item.price.toFixed(2)}</td>
                <td>${item.discount}%</td>
                <td>${discountedPrice.toFixed(2)}</td>
                <td>${item.vendor}</td>
                <td><button onclick="removeFromCart(${index})">Remove</button></td>
            `;
    });

    totalElement.textContent = `${total.toFixed(2)}`;
}


        // Populate the discount table dynamically
        const discountTableElement = document.getElementById('discount-table');

        discountTable.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${item.Vendor}</td>
                <td>${item['Trade A']}</td>
                <td>${item['Trade B']}</td>
                <td>${item['Trade C']}</td>
                <td>${item['Trade D']}</td>
            `;
            discountTableElement.appendChild(row);
        });

        // Populate the product table dynamically
        const productTableElement = document.getElementById('product-table');

        productTable.forEach(item => {
            const row = document.createElement('tr');
            const tags = item.tags.join(', ');
            row.innerHTML = `
                <td>${item.id}</td>
                <td>${item.name}</td>
                <td>${item.price.toFixed(2)}</td>
                <td>${tags}</td>
                <td>${item.vendor}</td>
                <td><button onclick="addToCart(${item.id})">Add to Cart</button></td>
            `;
            productTableElement.appendChild(row);
        });


    </script>

    
  
</body>

</html>

